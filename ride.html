<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>AudioShake Integration Example</title>

    <!-- Bootstrap CSS for styling -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

    <!-- AudioShake Widget Script -->
    <script src="https://assets.audioshake.ai/audioshake1.1.min.js" type="text/javascript"></script>

    <style>
        /* Add some custom styling for better visual presentation */
        body {
            padding: 20px;
            font-family: Arial, sans-serif;
        }
        table {
            width: 100%;
            margin-top: 20px;
        }
        th, td {
            padding: 15px;
            text-align: left;
        }
        .btn-info {
            margin: 10px 0;
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>AudioShake Widget Integration Example</h1>
        <p>Click the "Generate Stems" button to generate stems for the song using AudioShake.</p>

        <table class="table table-bordered">
            <thead>
                <tr>
                    <th>Song Name</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Sample Song</td>
                    <td id="sample-element-id-123456"
                        audioshake-audio-id="sample-song-id-123456789"
                        audioshake-link="https://link/to/file.wav"
                        audioshake-filename="sample-song">
                        <button class="btn btn-info">Generate Stems</button>
                    </td>
                </tr>
                <!-- Add more rows as needed -->
            </tbody>
        </table>
    </div>

    <!-- AudioShake Widget Setup and Initialization -->
    <script type="text/javascript">
        // Setup the AudioShake Widget
        function setupAudioShakeWidget() {
            const stemOptions = ['vocals', 'instrumental', 'bass', 'drums', 'guitar', 'piano'];
            const licenseId = 'your-license-id'; // Replace with your actual license ID
            const format = 'wav';
            const widgetUserSessionId = 'unique-session-id'; // Unique session identifier for this user

            // Create a new instance of the AudioShake widget
            const gAudioShakeWidget = new AudioShakeWidgetLib.WidgetPresenter({
                licenseId,
                format,
                stemOptions,
                widgetUserSessionId
            });

            console.log('AudioShake Widget Initialized: ', gAudioShakeWidget);

            // Bind click event to elements with audioshake-audio-id attribute
            document.querySelectorAll('[audioshake-audio-id]').forEach(element => {
                element.querySelector('button').addEventListener('click', () => {
                    const audioId = element.getAttribute('audioshake-audio-id');
                    const audioLink = element.getAttribute('audioshake-link');
                    const audioFilename = element.getAttribute('audioshake-filename');

                    console.log(`Generating stems for audio ID: ${audioId}`);
                    console.log(`Audio Link: ${audioLink}`);
                    console.log(`Audio Filename: ${audioFilename}`);

                    // Open the AudioShake widget for stem generation
                    gAudioShakeWidget.open({
                        audioId: audioId,
                        audioLink: audioLink,
                        audioFilename: audioFilename
                    });
                });
            });
        }

        // Initialize the widget once the DOM content is fully loaded
        document.addEventListener('DOMContentLoaded', (event) => {
            setupAudioShakeWidget();
        });
    </script>

    <!-- jQuery and Bootstrap JS for necessary widget dependencies -->
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
</body>

</html>
